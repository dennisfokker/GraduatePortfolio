<!DOCTYPE html>
<html>

    <head>
        <!-- Standard Meta -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <!-- Site Properties -->
        <title>DFokker Portfolio - Submarine</title>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">

        <link rel="stylesheet" type="text/css" href="css/home.css">
        <link rel="stylesheet" type="text/css" href="css/main-product.css">

        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    </head>

    <body>
        <a href="index.html">
            <div class="banner ui inverted vertical center aligned segment">
                <div class="ui text container">
                    <h1 class="ui inverted header">Graduate Portfolio</h1>
                </div>
            </div>
        </a>


        <div class="ui inverted three item important attached menu">
            <div class="ui centered aligned container">

                <a class="item" href="index.html">
                    Home
                </a>

                <div class="ui simple dropdown active item">
                    Products <i class="dropdown icon"></i>
                    <div class="menu">
                        <a class="item" href="enversed-framework.html">Enversed framework</a>
                
                        <a class="item" href="proto-backend.html">PROTO game collection</a>
                
                        <div class="active item" href="proto-game-collection.html">
                            PROTO game collection <i class="dropdown icon"></i>
                            <div class="menu">
                                <a class="item" href="proto-aircycle.html">Aircycle</a>
                
                                <a class="item" href="proto-balloon-escape.html">Balloon escape</a>
                
                                <a class="item" href="proto-car-inventor-race.html">Car inventor race</a>
                
                                <a class="item" href="proto-intro-experience.html">Intro experience</a>
                
                                <a class="item" href="proto-light-factory.html">Light factory</a>
                
                                <a class="item" href="proto-steam-racers.html">Steam racers</a>
                
                                <div class="active item" href="proto-submarine.html">Submarine</div>
                
                                <a class="item" href="proto-train-heist.html">Train heist</a>
                            </div>
                        </div>
                    </div>
                </div>

                <a class="item">
                    About internship
                </a>

            </div>
        </div>

        <div class="ui container basic segment content">
            <div class="ui vertical center aligned segment">
                <h1 class="ui title header">SUBMARINE</h1>
                <video class="ui fluid image" autoplay loop muted>
                    <source src="https://drive.google.com/uc?export=download&id=18YvIRDvIFUW6eyMLghRGioNNQoaeGjjw" type="video/mp4">
                    Your browser does not support the mp4 video tag.
                </video>

                <div class="intro">
                    Submarine is a game about taking a dive in the newest of submarines, get right into Atlantis and take home the precious treasure waiting down below.<br>
                    Dive deep down to Atlantis with upto 2 other players, fighting off waves of automated defending robots to unlock the domes that hide the treasure inside.<br>
                </div>
            </div>

            <div class="ui vertical stripe segment">
                <div class="ui basic center aligned segment">
                    <h1 class="ui title header">CONCEPT</h1>
                </div>

                <p>In the Submarine game, you take one of the three spots in the submarine, your friends can take the other two. The submarine will then descent to Atlantis where it’ll wait at three different markings.</p>
                <p>On these markings, the players will be attacked by the automated defense system, which they will have to defeat with the submarine’s torpedo shooters. Once a marking has been cleared, one layer of protection will be lifted off the treasure in the centre of Atlantis.</p>
                <p>As the players make their way through, they either fail as they get overwhelmed by the enemies, or be victorious and take the treasure back to the surface.</p>
            </div>

            <div class="ui vertical stripe segment">
                <div class="ui basic center aligned segment">
                    <h1 class="ui title header">DEVELOPMENT</h1>
                </div>

                <h4 class="ui title header">configuration-based spawning</h4>
                <p>The game should be plug’n’play without input from the players. We know there are three PCs and we know which one is left, middle and right. In order to achieve this, we use Enversed’s username implementation that is set on installing the game (e.g. rightmost player has username 0, middle has 1 and leftmost has 2).</p>
                <p>Based on the username, we know where the player should be placed inside the submarine (should coincide with real-world position). The first implementation was to simply spawn a player like you normally would (let UE4 handle it), and then attach the player to its dedicated spot in the submarine.</p>
                <p>This didn’t work out. Attachment replication always causes some weird behaviour when moving the objects around, something both I and Enversed haven’t been able to figure out yet as to why that happens. Thus when the submarine starts moving, the player would start desyncing with the submarine, ending up ahead and behind of the submarine and making odd, inconsistent rotations.</p>
                <p>The second iteration was possession: pre-place the pawns in the submarine as child actors (part of the submarine blueprint) and possess your dedicated pawn upon joining the game. Since the pawn was now an actual part of the submarine, there were no more replication and movement issues.</p>

                <h4 class="ui title header">implement aimpoint on a spherical window</h4>
                <p>In order to help the player with aiming, a target icon was added to the semi-sphere glass window in front of the player.</p>
                <p>The simple implementation for this would be to place a decal on the window that would move around as you looked around. However this would end up stretching the icon (decals only work nicely on flat surfaces), which wasn’t a desired effect; it had to cleanly move around in UV-space</p>
                <p>An artist managed to create a material which had a vector input. The X and Y-axis were, as expected, the (X,Y) movement of the icon along the glass. However it wouldn’t be able to quite reach the edges, nor was it a linear transition; near the edges the same change in, for example, the X coordinate would move it much less than near the centre. This causes the icon to essentially move ahead of the player’s gaze at first before gradually slowing down to align with the player’s view again.</p>
                <p>Here the Z-axis comes into play. The Z-axis works as a sort of scaler, making changes in the other two axis more or less prominent. However this value has to be changed based on the actual (X,Y) value, as it has to solve two issues: Can’t reach the edges of the window (would normally be solved with a static Z value of ~0.8) and the fact that the (X,Y) changes aren’t linear (this means the scaling has to happen dynamically to slow the movement at first and allow it to speed back up near the edges).</p>
                <p>After a lot of trying around and testing, the movement seemed to happen in a sort of logarithmic manner. While it wasn’t perfect, it provided a close-enough approximation to calculate the third power of the X and Y value to make it more linear. These values are then mapped into the 0-0.8 range and added together (to get the extent of the two axis together) for the Z value.</p>
                <p>Now the next issue popped up. Looking over the pure X (i.e Y = 0) or pure Y (i.e. X = 0) axis now provided fairly accurate movement of the target icon. However the icon didn’t quite move along the edge, being most extreme when looking at a 45 degree angle from the two axis (i.e. inbetween).</p>
                <p>This is because the input values are placed on a unit-circle, however the texture the icon moves around on is a square; a unit-square. After some looking around on the internet, a transformation formula was found and implemented.</p>
                <div id="calculation">
                    <img class="ui fluid image zoomable" src="assets/images/proto-submarine/submarine-aimpoint-calculation.png">
                    <div class="ui dimmer">
                        <div class="content">
                            <h1 class="ui inverted icon header">
                                <i class="search plus icon"></i>
                                Zoom in
                            </h1>
                        </div>
                    </div>
                </div>

                <h4 class="ui title header">score</h4>
                <p>(Almost) all PROTO games provide the player with some score value at the end of the game. To make all game scores more connected, they all follow a certain score format, something we called “score standardisation”: a “decent”-rated player should get roughly the same score in every game.</p>
                <p>The document that outlines all the score standardisation values/calculations can be found <a href="https://www.dropbox.com/s/cmhcqowj3kmb5dg/Score%20standardization.pdf?dl=0" target="_blank">here <i class="fitted dropbox icon"></i></a>.</p>
                <p>Submarine is another fixed-length game. The fighting sequences always take the same amount of time (everything spawns on a timer) and so do the travel periods between them.</p>
                <p>This creates two variables. The obvious one is health, whilst the other is the amount of time the player has been fighting. Fighting less than the maximum time means you dead somewhere and couldn’t finish the game.</p>
                <p>In this game it has been chosen to use health mostly as a perfectionist variable: if you manage to finish the game, those last couple of points to get into a 4-digit score lie in losing as little health as possible. This is reflected in how steep the curve goes from good to expert.</p>
            </div>
        </div>


        <div class="ui inverted vertical footer segment">
            <img class="ui left floated medium image" src="assets/images/enversed-banner.png">
        </div>
        
        
        
        <div id="calculation-modal" class="ui basic modal">
            <i class="close icon"></i>
            <div class="header">Aimpoint calculation</div>
            <div class="content">
                <img class="ui fluid image" src="assets/images/proto-submarine/submarine-aimpoint-calculation.png">
            </div>
        </div>
        
        
        
        <script type="text/javascript">
            $('#calculation').click(function ()
            {
                $('#calculation-modal').modal('show');
            }).dimmer({
                on: 'hover'
            });
        </script>

    </body>
</html>
